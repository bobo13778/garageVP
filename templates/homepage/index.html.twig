{% extends "base.html.twig" %}

{% set userRole = auth %}

{% block title %}
Accueil
{% endblock %}

{% block body %}
{{parent()}}
  <div class="row garage-picture text-center align-items-center">
    <h1 class="main-title">Garage V. PARROT</h1>
  </div>
  <div class="row mt-3 justify-content-between">
    <div class="col-12 col-md-8">
      <h2 class="deep-green-text">Nos services</h2>
      {% for service in services %}
        <div class="row mb-3 shadow">
          <img class="img-fluid col-12 col-md-4" src ={{service.picture}} alt={{service.name}}/>
          <div class="col-12 col-md-8">
            <h3><strong>{{service.name}}</strong></h2>
            <p>{{service.description}}</p>
          </div>
        </div>
      {% endfor %}
    </div>
    <div class="col-12 col-md-3 mt-2">
      <div class="mb-3 shadow p-2">
        <h2 class="deep-green-text">Votre avis nous intéresse</h2>
        {% include './homepage/_form_testimony.html.twig' %}
      </div>
      <h2 class="deep-green-text">Nos clients parlent de nous</h2>
      {% for testimony in testimonies %}
        {% if testimony.tovalidate != '1' %}
          <div class="row mb-2 shadow">
            <div class="row">
              <p class="col-6"><strong>{{testimony.name}}</strong></p>
              <p class="col-6 text-center">
                {% for i in 1..testimony.grade %}
                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="yellow" stroke="black" class="bi bi-star-fill" viewBox="0 0 16 16">
                    <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                  </svg>
                {% endfor %}
                {% if testimony.grade < 5 %}
                  {% for i in testimony.grade +1..5 %}
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" stroke="black" class="bi bi-star-fill" viewBox="0 0 16 16">
                      <path d="M3.612 15.443c-.386.198-.824-.149-.746-.592l.83-4.73L.173 6.765c-.329-.314-.158-.888.283-.95l4.898-.696L7.538.792c.197-.39.73-.39.927 0l2.184 4.327 4.898.696c.441.062.612.636.282.95l-3.522 3.356.83 4.73c.078.443-.36.79-.746.592L8 13.187l-4.389 2.256z"/>
                    </svg>
                  {% endfor %}
                {% endif %}
              </p>
            </div>
            <div class="col-12 col-md-8">
              <p>{{testimony.content}}</p>
              <strong>Déposé le : </strong>{{testimony.date}} à {{testimony.time}}
            </div>
          </div>
        {% endif %}
      {% endfor %}

    </div>
  </div>
{% endblock %}

{% block schedule %}
  {% include './_schedule_template.html.twig' with {'schedules': schedules} %}
{% endblock %}

{% block javascripts %}
  <script src ="./Assets/starsForm.js"></script>
{% endblock %}